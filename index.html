<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Englannin sanakoe - harjoittelu</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 600px;
      margin: 2rem auto;
      line-height: 1.5;
    }
    #card {
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }
    .question-label {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.25rem;
    }
    .question {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    input[type="text"] {
      width: 100%;
      font-size: 1.2rem;
      padding: 0.5rem 0.75rem;
      border-radius: 8px;
      border: 1px solid #999;
    }
    input[type="text"]:focus {
      outline: 2px solid #000;
    }
    .button-group {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    button {
      font-size: 1rem;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      border: 1px solid #000;
      background: #000;
      color: #fff;
      cursor: pointer;
      flex-grow: 1; /* Tee napeista samankokoisia */
    }
    button:active {
      transform: scale(0.98);
    }
    #result {
      margin-top: 1rem;
      min-height: 2rem;
      font-size: 1.1rem;
      font-weight: 500;
    }
    #stats {
      margin-top: 1rem;
      font-size: 0.95rem;
      color: #333;
    }
    .ok {
      color: green;
      font-weight: 600;
    }
    .bad {
      color: red;
      font-weight: 600;
    }
    .feedback-table {
      margin-top: 1rem;
      width: 100%;
      border-collapse: collapse;
      font-size: 1rem;
    }
    .feedback-table th, .feedback-table td {
      padding: 0.5rem;
      border: 1px solid #eee;
    }
    .feedback-table th {
      text-align: left;
      background-color: #f7f7f7;
      width: 40%;
    }
    .feedback-table td {
      font-family: monospace;
      font-size: 1.1em;
      white-space: pre-wrap;
    }
    /* Piilotetaan nappi kun vastaus on käsitelty */
    #checkBtn.hidden {
        display: none;
    }
    #nextBtn.hidden {
        display: none;
    }
  </style>
</head>
<body>
  <h1>Englannin sanakoe - harjoittelu</h1>
  <p>
    Vastaa suomenkieliseen käännökseen. Kirjoita vastaava **englanninkielinen sana tai lause tismalleen oikein** (kuten luettelossa).
  </p>
  <div id="card">
    <div class="question-label" id="qLabel">Kirjoita englanniksi:</div>
    <div class="question" id="questionText">---</div>
    <label for="answerInput">Vastaus:</label>
    <input id="answerInput" type="text" autocomplete="off" />
    <div class="button-group">
        <button id="checkBtn">Tarkista</button>
        <button id="nextBtn" class="hidden" style="background-color: #0056b3;">Seuraava kysymys</button>
    </div>
    <div id="result"></div>
    <div id="stats"></div>
  </div>
  <script>
    // Kuvasta poimitut englannin sanat/lauseet ja niiden suomenkieliset käännökset
    const vocabulary = [
      { fi: "lippu", en: "a ticket" },
      { fi: "istuin, paikka", en: "a seat" },
      { fi: "ravintolavaunu", en: "a dining car" },
      { fi: "ensiapupakkaus", en: "a first-aid kit" },
      { fi: "käymälä, wc", en: "a restroom, a toilet" },
      { fi: "minun syyni", en: "my fault" },
      { fi: "muut matkustajat", en: "other passengers" },
      { fi: "seuraava asema", en: "the next station" },
      { fi: "tilan puute", en: "a lack of room" },
      { fi: "kurja alku", en: "a miserable beginning" },
      { fi: "iso yllätys", en: "a big surprise" },
      { fi: "kahden ja puolen päivän junamatka", en: "a two-and-a-half-day train journey" },
      { fi: "kuulua tanssiryhmään", en: "belong to a dance group" },
      { fi: "päättää pitää yhden yön pysähdys", en: "decide to have a one-night stopover" },
      { fi: "Älä syytä minua!", en: "Don't blame me!" },
      { fi: "esiintyä kaduilla", en: "perform on the streets" },
      { fi: "olla samaa mieltä Leen kanssa", en: "agree with Lee" },
      { fi: "matkustaa bussilla", en: "travel by bus" },
      { fi: "vaihtaa junaa", en: "change trains" },
      { fi: "jäädä pois junasta", en: "get off the train" },
      { fi: "varata huone", en: "reserve a room" },
      { fi: "jakaa huone", en: "share a room" },
      { fi: "vahingoittaa ympäristöä", en: "harm the environment" },
      { fi: "polttaa polttoainetta", en: "burn fuel" },
      { fi: "nyrjäyttää nilkan", en: "sprain an ankle" },
      { fi: "ottaa osaa tapahtumaan", en: "take part in an event" },
      { fi: "sairastua", en: "get sick" },
      { fi: "kuluttaa rahaa", en: "spend money" },
      { fi: "vilkaista", en: "have a look" },
    ];
    // tilastot
    let correctCount = 0;
    let totalCount = 0;
    // nykyinen kysymys
    let currentVocab = null; 
    
    // Elementit
    const ansInput = document.getElementById("answerInput");
    const checkBtn = document.getElementById("checkBtn");
    const nextBtn = document.getElementById("nextBtn");
    const resultDiv = document.getElementById("result");
    
    // apu satunnaiseen kokonaislukuun väliltä [min, max]
    function randInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    // Luo uusi kysymys
    function newQuestion() {
      // Salli uusi vastaus
      ansInput.disabled = false; 
      ansInput.value = "";
      ansInput.focus();
      checkBtn.classList.remove("hidden");
      nextBtn.classList.add("hidden");
      resultDiv.innerHTML = "";
      
      // Arvo satunnainen indeksi sanastosta
      const index = randInt(0, vocabulary.length - 1);
      currentVocab = vocabulary[index];
      
      // Kysymys on aina suomi -> englanti
      document.getElementById("qLabel").textContent = "Kirjoita englanniksi:";
      document.getElementById("questionText").textContent = currentVocab.fi;
    }
    
    // Tarkista vastaus
    function checkAnswer() {
      const userRaw = ansInput.value.trim();
      
      // Estä vastaaminen, jos kenttä on tyhjä
      if (userRaw.length === 0) {
        resultDiv.innerHTML = "<span class='bad'>Kirjoita ensin vastaus!</span>";
        return;
      }
      
      const correctAnswer = currentVocab.en;
      
      // Estä vastauskentän muokkaus ja vaihda napit
      ansInput.disabled = true;
      checkBtn.classList.add("hidden");
      nextBtn.classList.remove("hidden");
      
      // Tarkistetaan vastaus: täytyy olla täsmälleen oikein (case-insensitivenä)
      const ok = (userRaw.toLowerCase() === correctAnswer.toLowerCase());
      
      totalCount += 1;
      
      let feedbackHTML = "";
      
      if (ok) {
        correctCount += 1;
        feedbackHTML = "<span class='ok'>⭐ Aivan oikein! Hyvä! ⭐</span>";
      } else {
        feedbackHTML = "<span class='bad'>Väärin.</span> Tässä vertailu:";
        feedbackHTML += `
          <table class="feedback-table">
            <tr>
              <th>Oikea vastaus:</th>
              <td>${correctAnswer}</td>
            </tr>
            <tr>
              <th>Sinun vastauksesi:</th>
              <td>${userRaw}</td>
            </tr>
          </table>
        `;
      }
      
      resultDiv.innerHTML = feedbackHTML;
      
      document.getElementById("stats").textContent =
        "Pisteet: " + correctCount + " / " + totalCount;

      nextBtn.focus(); // Vie fokus seuraavaan nappiin
    }
    
    // Nappien kuuntelijat
    checkBtn.addEventListener("click", checkAnswer);
    nextBtn.addEventListener("click", newQuestion);
    
    // Enter-näppäin vastaa tarkista-nappia vain, jos se on näkyvissä
    ansInput.addEventListener("keydown", function (e) {
        if (e.key === "Enter" && !checkBtn.classList.contains("hidden")) {
            e.preventDefault();
            checkAnswer();
        }
    });

    // Enter-näppäin vastaa seuraava-nappia, jos se on näkyvissä
    nextBtn.addEventListener("keydown", function (e) {
        if (e.key === "Enter" && !nextBtn.classList.contains("hidden")) {
            e.preventDefault();
            newQuestion();
        }
    });
      
    // Käynnistä ensimmäinen kysymys
    newQuestion();
  </script>
</body>
</html>
